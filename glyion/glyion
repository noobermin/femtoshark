begin:constant
  #mine
  um = micron
  fs = femto
  ps = femto*1000
  lambda = 0.780*um

  # convience
  s = sqrt(y^2 + z^2)

  #target lims
  txmin = -0.230*um
  txmax =  0.230*um
  tymin = -19.5*um
  tymax =  19.5*um
  tzmin = -19.5*um
  tzmax =  19.5*um
  
  #material
  scalel = 2*um
  targ_s = -0.230*um
  targ_e =  0.230*um
  targetsol = 1.08e22/cc
  tboundx = (x gt targ_s) and (x lt targ_e)
  target = if(tboundx, targetsol, 0)
  boundy = (y gt tymin) and (y lt tymax)
  boundz = (z gt tzmin) and (z lt tzmax)
  targdens=if(boundy and boundz, target, 0)
  temp = 0.025*ev

  #laser
  spotsize=2.2*um
  pulse=42*fs
  #incidence angle
  angi = pi/4
  kphase = -2*pi*sin(angi) / lambda

end:constant

begin:control
  nx = 2000
  ny = 1600
  nz =  800
  t_end = 200*fs
  
  #I hate I can't set this myself
  dt_multiplier = 0.9


  # size of domain
  x_min = -15*um
  x_max =   5*um
  y_min = -20*um
  y_max =  20*um
  z_min = -20*um
  z_max =  20*um

  #this is so me
  field_ionisation=T
  simplify_deck=T
  allow_missing_restart=T
  field_ionisation=T
  stdout_frequency=1000
  
end:control


begin:boundaries
  bc_x_min = simple_laser
  bc_x_max = simple_outflow
  bc_y_min = simple_outflow
  bc_y_max = simple_outflow
  bc_z_min = simple_outflow
  bc_z_max = simple_outflow
end:boundaries


#species
#water
begin:species
  name = hydrogen
  charge = 0.0
  mass = 1837
  ionisation_energies = (13.6*ev)
  ionisation_electron_species = electron
  npart_per_cell = 4
  density = targdens*2
  temp_ev = temp
end:species

begin:species
  name = carbon
  charge = 0.0
  mass = 21887
  ionisation_energies = \
    (11.3*ev, 24.4*ev, 47.9*ev, 64.5*ev, 392.1*ev, 490.0*ev)
  #fucking manual is wrong jesus christ
  ionisation_electron_species = electron
  npart_per_cell = 4
  density = targdens*1
  temp_ev = temp
end:species

begin:species
  name = oxygen
  charge = 0.0
  mass = 29158
  ionisation_energies = \
    (13.6*ev, 35.1*ev, 54.9*ev, 77.4*ev, 113.8*ev, 138.1*ev, 739.3*ev, 871.4*ev)
  #fucking manual is wrong jesus christ
  ionisation_electron_species = electron
  npart_per_cell = 4
  density = targdens*1
  temp_ev = temp
end:species

begin:species
  name = electron
  charge = -1.0
  mass = 1.0
  npart_per_cell = 0
  density = 0
  temp_ev = 0
end:species


begin:laser
  boundary = x_min
  intensity_w_cm2=1e18
  phase = kphase*y
  lambda = lambda*cos(phase);
  profile = gauss(s, 0.0, spotsize/(2*sqrt(loge(2))))
  t_profile = sin(2*pi*time/(2*pulse))^2
end:laser

####
#Output


begin:output
  name = fields
  # number of timesteps between output dumps
  dt_snapshot = 1*fs
  # grid outputs
  grid = always
  poynt_flux = always
  ekbar = always + species
  number_density = always + species
end:output

begin:output
  name = parts
  dt_snapshot = 5*fs
  restartable = T
  # particle outputs
  particles = always
  particle_weight = always
  ejected_particles = always
  px = always
  py = always
  pz = always
  mass = always
  charge = always
end:output

